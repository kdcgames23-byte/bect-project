<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Niveau</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="level-container"></div>

<script type="module">
import { API_URL } from './script.js';

const params = new URLSearchParams(window.location.search);
const levelId = params.get("id");

async function loadLevel(){
  try{
    const res = await fetch(`${API_URL}/levels/${levelId}`);
    const data = await res.json();
    if(!data.success) return document.getElementById('level-container').innerHTML="<p>Niveau introuvable</p>";

    const container = document.getElementById('level-container');
    container.innerHTML=`
      <h2>${data.level.title}</h2>
      <p>${data.level.description}</p>
      ${data.level.images.map(img=>`<img src="${img}" alt="image" style="width:300px;height:auto;margin:5px;border-radius:8px">`).join('')}
      <p>Créé par <span style="cursor:pointer;color:blue;" onclick="window.location.href='utilisateur.html?username=${data.level.creator}'">${data.level.creator}</span></p>
    `;
  } catch(err){ console.error(err); document.getElementById('level-container').innerHTML="<p>Erreur serveur</p>"; }
}

loadLevel();
</script>
</body>
</html>
